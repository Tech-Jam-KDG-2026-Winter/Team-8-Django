import csv
import random

# 設定
OUTPUT_FILE = 'data.csv' 
COUNT_PER_CATEGORY = 50 # 各カテゴリ50件（以下のリアルデータをループさせて水増しします）

REAL_RECIPES = {
    'morning': [
        {
            'title': "ふわとろスクランブルエッグと全粒粉パン",
            'desc': "ホテルの朝食のようなクリーミーな卵料理です。",
            'ing': "卵 2個\n牛乳 大さじ2\nバター 10g\n塩コショウ 少々\n全粒粉食パン 1枚",
            'steps': "1. ボウルに卵を割り入れ、牛乳、塩コショウを加えて白身を切るようによく混ぜる。\n2. フライパンを中火で熱し、バターを溶かす。\n3. 卵液を一気に流し入れ、ゴムベラで外側から内側へ大きく混ぜる。\n4. 半熟状態で火を止め、余熱で火を通しながら皿に盛る。\n5. トーストしたパンを添えて完成。",
            'cal': 420, 'p': 18.5, 'f': 22.0, 'c': 35.0
        },
        {
            'title': "アボカドとサラダチキンのトースト",
            'desc': "良質な脂質とタンパク質が摂れる最強の朝食。",
            'ing': "食パン 1枚\nアボカド 1/2個\nサラダチキン 50g\nレモン汁 小さじ1\n黒胡椒 適量\nオリーブオイル 小さじ1",
            'steps': "1. アボカドは種を取り、スプーンですくってボウルに入れ、フォークで粗く潰す。\n2. レモン汁と塩（分量外）を混ぜて変色を防ぐ。\n3. 食パンをトーストする。\n4. パンにアボカドペーストを塗り、スライスしたサラダチキンを乗せる。\n5. 仕上げにオリーブオイルと黒胡椒を振る。",
            'cal': 380, 'p': 20.0, 'f': 18.0, 'c': 40.0
        },
        {
            'title': "鯖缶と大根おろしの朝定食",
            'desc': "DHA/EPA豊富な鯖缶を使った、包丁いらずの和食。",
            'ing': "鯖水煮缶 1/2缶（約90g）\n大根 5cm\n醤油 小さじ1\nご飯 150g\n味噌汁（インスタント可） 1杯",
            'steps': "1. 大根は皮をむき、すりおろして軽く水気を切る。\n2. 器に鯖の水煮を盛り付け、大根おろしを添える。\n3. おろしに醤油を少し垂らす。\n4. 温かいご飯と味噌汁を準備して定食にする。",
            'cal': 550, 'p': 28.0, 'f': 15.0, 'c': 75.0
        },
    ],
    'lunch': [
        {
            'title': "豚肉と彩り野菜のオイスター炒め",
            'desc': "ご飯が進む味付けですが、野菜たっぷりでヘルシー。",
            'ing': "豚こま切れ肉 100g\nピーマン 2個\nパプリカ（赤） 1/4個\n玉ねぎ 1/4個\n片栗粉 小さじ1\n【A】オイスターソース 大さじ1\n【A】酒 大さじ1\n【A】醤油 小さじ1",
            'steps': "1. 豚肉は一口大に切り、酒と塩胡椒（分量外）を振り、片栗粉をまぶす。\n2. ピーマン、パプリカは細切り、玉ねぎはくし形に切る。\n3. フライパンにごま油を熱し、豚肉を中火で炒める。\n4. 肉の色が変わったら野菜を加え、強火でサッと炒め合わせる。\n5. 合わせた【A】を回し入れ、全体に絡んだら完成。",
            'cal': 620, 'p': 25.0, 'f': 22.0, 'c': 70.0
        },
        {
            'title': "鶏むね肉の柔らかネギ塩だれ",
            'desc': "パサつきがちな鶏むね肉をしっとり仕上げるプロの技。",
            'ing': "鶏むね肉 150g\n長ネギ 1/2本\n片栗粉 大さじ1\n酒 大さじ1\n【タレ】鶏ガラスープの素 小さじ1\n【タレ】レモン汁 小さじ1\n【タレ】ごま油 大さじ1\n【タレ】塩こしょう 少々",
            'steps': "1. 鶏むね肉は削ぎ切りにし、ポリ袋に入れて酒と塩少々を揉み込み10分置く。\n2. ネギはみじん切りにし、【タレ】の材料と混ぜ合わせておく。\n3. 鶏肉に片栗粉を薄くまぶす。\n4. フライパンに油をひき、鶏肉を中火で焼く。焼き色がついたら裏返し、蓋をして弱火で3分蒸し焼きにする。\n5. 皿に盛り、特製ネギ塩だれをたっぷりかける。",
            'cal': 580, 'p': 35.0, 'f': 18.0, 'c': 65.0
        },
        {
            'title': "きのことベーコンの和風パスタ",
            'desc': "バター醤油の香りが食欲をそそる時短ランチ。",
            'ing': "スパゲッティ 100g\nしめじ 1/2パック\n舞茸 1/2パック\nベーコン 2枚\nバター 10g\n醤油 大さじ1\n刻み海苔 適量",
            'steps': "1. 鍋に湯を沸かし、塩を入れてパスタを表示時間より1分短く茹でる。\n2. フライパンにオリーブオイルを引き、短冊切りのベーコンときのこ類を炒める。\n3. パスタの茹で汁お玉1杯分をフライパンに加え、乳化させる。\n4. 茹で上がったパスタとバター、醤油を加え、手早く混ぜ合わせる。\n5. 器に盛り、刻み海苔を散らす。",
            'cal': 650, 'p': 20.0, 'f': 25.0, 'c': 85.0
        },
    ],
    'dinner': [
        {
            'title': "基本のぶり大根",
            'desc': "味が染み込んだ大根が主役。冬の定番メニュー。",
            'ing': "ぶり切り身 2切れ\n大根 1/3本\n生姜 1片\n水 300ml\n【A】酒 100ml\n【A】醤油 大さじ3\n【A】みりん 大さじ2\n【A】砂糖 大さじ2",
            'steps': "1. 大根は2cm厚さの半月切りにし、米のとぎ汁（または水）で竹串が通るまで下茹でする。\n2. ぶりは一口大に切り、熱湯を回しかけて霜降りにし、冷水で洗って臭みを取る。\n3. 鍋に水、【A】、スライスした生姜を入れて煮立たせる。\n4. ぶりと大根を入れ、落とし蓋をして中火で20分煮込む。\n5. 一度冷まして味を含ませてから、温め直して食べるのがおすすめ。",
            'cal': 480, 'p': 30.0, 'f': 25.0, 'c': 35.0
        },
        {
            'title': "豆腐ハンバーグのおろしポン酢",
            'desc': "お肉少なめでヘルシーなのに満足感のある一品。",
            'ing': "鶏ひき肉 150g\n木綿豆腐 150g\n玉ねぎ 1/4個\nパン粉 大さじ3\n片栗粉 大さじ1\n大根おろし 適量\nポン酢 適量\n大葉 2枚",
            'steps': "1. 木綿豆腐はキッチンペーパーに包み、レンジで2分加熱して水切りする。\n2. 玉ねぎはみじん切りにし、レンジで1分加熱して冷ます。\n3. ボウルにひき肉、豆腐、玉ねぎ、パン粉、片栗粉、塩コショウを入れ、粘りが出るまでよく捏ねる。\n4. 小判型に成形し、油を引いたフライパンで焼く。焼き色がついたら裏返し、蓋をして弱火で5分蒸し焼きにする。\n5. 皿に盛り、大葉と大根おろしを乗せ、ポン酢をかける。",
            'cal': 420, 'p': 28.0, 'f': 18.0, 'c': 30.0
        },
        {
            'title': "鮭のちゃんちゃん焼き風ホイル焼き",
            'desc': "洗い物削減！味噌バターが野菜と魚に絡む北海道の味。",
            'ing': "生鮭 1切れ\nキャベツ 2枚\n玉ねぎ 1/4個\n人参 3cm\nしめじ 1/4パック\nバター 10g\n【味噌ダレ】味噌 大さじ1、みりん 大さじ1、酒 小さじ1",
            'steps': "1. キャベツはざく切り、玉ねぎはスライス、人参は短冊切りにする。味噌ダレは混ぜておく。\n2. アルミホイルを広げ、野菜を敷き詰め、その上に鮭を乗せる。\n3. 味噌ダレを全体にかけ、一番上にバターを乗せる。\n4. ホイルの口をしっかり閉じ、フライパンに並べる。水100ml（分量外）を注ぎ、蓋をして中火で10〜12分蒸し焼きにする。\n5. ホイルを開け、全体を混ぜながら食べる。",
            'cal': 380, 'p': 25.0, 'f': 20.0, 'c': 25.0
        },
    ]
}

def make_data():
    header = ['料理名', '説明', '材料', '手順', 'カロリー', 'タンパク質', '脂質', '炭水化物', 'カテゴリ', '画像パス']
    data = []
    
    for category in ['morning', 'lunch', 'dinner']:
        # そのカテゴリのリアルレシピリストを取得
        recipes = REAL_RECIPES[category]
        
        for i in range(COUNT_PER_CATEGORY):
            # リストの中から順番に選ぶ（ループさせる）
            base = recipes[i % len(recipes)]
            
            # 少し数値を揺らしてバリエーションを出す（完全に同じデータだとDB的に面白くないため）
            variation = random.uniform(0.95, 1.05)
            
            row = {
                '料理名': base['title'],  # タイトルはそのまま（番号つけない）
                '説明': base['desc'],
                '材料': base['ing'],
                '手順': base['steps'],
                'カロリー': int(base['cal'] * variation),
                'タンパク質': round(base['p'] * variation, 1),
                '脂質': round(base['f'] * variation, 1),
                '炭水化物': round(base['c'] * variation, 1),
                'カテゴリ': category,
                '画像パス': ''
            }
            data.append(row)

    with open(OUTPUT_FILE, 'w', newline='', encoding='utf-8') as f:
        writer = csv.DictWriter(f, fieldnames=header)
        writer.writeheader()
        writer.writerows(data)
    
    print(f"✅ 完了: {OUTPUT_FILE} に【本格レシピデータ】を作成しました！")
    print("※サンプルレシピをループさせて件数を確保しています。")

if __name__ == '__main__':
    make_data()